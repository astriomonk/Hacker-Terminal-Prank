<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hacker Terminal</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

  html, body {
    margin: 0; padding: 0; height: 100%; overflow: hidden;
    background: black;
    font-family: 'Share Tech Mono', monospace;
    color: #00ff00;
  }

  #binary-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 0;
    background: black;
  }

  #terminal {
    position: relative;
    z-index: 10;
    max-width: 900px;
    margin: 40px auto 20px auto;
    background: rgba(0,0,0,0.9);
    padding: 20px 30px 15px 30px;
    border: 1px solid #00ff00;
    box-shadow: 0 0 20px #00ff00;
    border-radius: 8px;
    height: 450px;
    display: flex;
    flex-direction: column;
    user-select: none;
  }

  #terminal-output {
    flex-grow: 1;
    overflow-y: auto;
    white-space: pre-wrap;
    font-size: 16px;
    line-height: 1.4;
    margin-bottom: 10px;
    user-select: text;
  }

  #input-line {
    color: #00ff00;
    font-size: 16px;
    line-height: 1.4;
    display: flex;
    align-items: center;
    user-select: none;
  }

  #input-line::before {
    content: "> ";
    user-select: none;
  }

  #input {
    flex-grow: 1;
    background: transparent;
    border: none;
    outline: none;
    color: #00ff00;
    font-family: 'Share Tech Mono', monospace;
    font-size: 16px;
    caret-color: #00ff00;
    padding-left: 0;
    user-select: text;
  }

  /* Blinking caret inside input */
  #input:focus {
    outline: none;
  }

  #visitors {
    margin: 15px auto 0 auto;
    max-width: 900px;
    font-size: 14px;
    text-align: center;
    color: #00cc00;
    user-select: none;
    text-shadow: 0 0 6px #00cc00;
  }
</style>
</head>
<body>

<canvas id="binary-canvas"></canvas>

<div id="terminal" tabindex="0" aria-label="Hacker Terminal">
  <div id="terminal-output"></div>
  <div id="input-line">
    <input id="input" type="text" autocomplete="off" spellcheck="false" placeholder="Type a command..." />
  </div>
</div>

<div id="visitors">Visitors: 0</div>

<script>
  // Binary code background animation
  const canvas = document.getElementById('binary-canvas');
  const ctx = canvas.getContext('2d');
  let width, height;
  let columns;
  let drops;

  function setupCanvas() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    columns = Math.floor(width / 14);
    drops = [];
    for (let x = 0; x < columns; x++) {
      drops[x] = Math.floor(Math.random() * height / 14);
    }
  }
  setupCanvas();

  window.addEventListener('resize', () => {
    setupCanvas();
  });

  const binaryChars = ['0','1'];

  function draw() {
    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
    ctx.fillRect(0, 0, width, height);
    ctx.fillStyle = '#00ff00';
    ctx.font = '14px "Share Tech Mono"';

    for(let i = 0; i < columns; i++) {
      const text = binaryChars[Math.floor(Math.random() * binaryChars.length)];
      ctx.fillText(text, i * 14, drops[i] * 14);

      if (drops[i] * 14 > height && Math.random() > 0.975) {
        drops[i] = 0;
      }
      drops[i]++;
    }
    requestAnimationFrame(draw);
  }
  draw();

  // Terminal typing simulation
  const terminalOutput = document.getElementById('terminal-output');
  const input = document.getElementById('input');
  const visitorsDisplay = document.getElementById('visitors');

  // Fake visitors count using localStorage
  let visitorsCount = localStorage.getItem('visitorCount') || 0;
  visitorsCount = parseInt(visitorsCount) + 1;
  localStorage.setItem('visitorCount', visitorsCount);
  visitorsDisplay.textContent = 'Visitors: ' + visitorsCount;

  // Text lines to display slowly in terminal output
  const lines = [
    "Initializing HackSim v3.14...",
    "Accessing secure server... Access granted.",
    "Establishing encrypted connection...",
    "Fetching user data... 42 records found.",
    "Analyzing traffic logs for anomalies...",
    "Bypassing firewall layers... Layer 1 complete.",
    "Decrypting sensitive files...",
    "Uploading payload...",
    "Payload upload successful.",
    "System override activated.",
    "Scanning network nodes...",
    "Alert! Intrusion detection system triggered!",
    "Launching countermeasures...",
    "Trace route initiated. Hiding IP...",
    "User device masked. Location obscured.",
    "Accessing deep web archives...",
    "Extracting encrypted keys...",
    "Brute forcing password hashes...",
    "Operation complete. Data exfiltrated.",
    "Disconnecting from host.",
    "Session terminated."
  ];

  let lineIndex = 0;
  function typeLines() {
    if (lineIndex >= lines.length) return;
    let line = lines[lineIndex];
    let charIndex = 0;

    function typeChar() {
      if (charIndex < line.length) {
        terminalOutput.textContent += line[charIndex];
        charIndex++;
        setTimeout(typeChar, 80);
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
      } else {
        terminalOutput.textContent += '\n';
        lineIndex++;
        setTimeout(typeLines, 500);
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
      }
    }
    typeChar();
  }
  typeLines();

  // When enter is pressed in input, append input text to output and clear input
  input.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      const command = input.value.trim();
      if (command.length > 0) {
        terminalOutput.textContent += `> ${command}\n`;
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
        input.value = '';
      }
      e.preventDefault();
    }
  });

  // Focus input on terminal click
  document.getElementById('terminal').addEventListener('click', () => {
    input.focus();
  });

  // Fullscreen toggle on 'F' key press
  document.addEventListener('keydown', e => {
    if (e.key.toLowerCase() === 'f') {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }
  });

  // Focus input automatically
  input.focus();
</script>

</body>
</html>
